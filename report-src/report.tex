\documentclass{article} % Use the required template class (e.g., IEEE, ACM, or simple article)
\usepackage[utf8]{inputenc} % allow utf-8 input
\usepackage[T1]{fontenc}    % use 8-bit T1 fonts
\usepackage{hyperref}       % hyperlinks
\usepackage{url}            % simple URL typesetting
\usepackage{booktabs}       % professional-quality tables
\usepackage{amsfonts}       % blackboard math symbols
\usepackage{amsmath}
\usepackage{nicefrac}       % compact symbols for 1/2, etc.
\usepackage{microtype}      % microtypography
\usepackage{lipsum}		% Can be removed after putting your text content
\usepackage{graphicx}
\usepackage{natbib}
\usepackage{doi}
\usepackage{float}
\usepackage[margin=1in]{geometry}
\usepackage{tabularx}
\usepackage{enumitem}

\title{UEFA Competition Referee Analysis Tool \\ \large Group: 4}
\author{
	Fannar Freyr JÃ³nuson \and Leonard Hastrup \and Petros Tsitsekidis \and Szymon Zalewski
}
\date{\today}

\begin{document}
\maketitle

% ---------------------------------
\section{Introduction}
% ---------------------------------
In the ecosystem of elite football, UEFA competitions represent the pinnacle of the sport. Referees selected for these tournaments, the Champions League, Europa League, and Conference League, are tasked with managing games involving diverse playing styles, high cultural stakes, and immense pressure. A single decision in these continental matchups can determine not just the outcome of a match, but the financial and historical trajectory of a club. However, despite the elite status of these officials, the discourse surrounding their performance often remains subjective. Fans and pundits frequently debate whether referees adjust their strictness based on the prestige of the tournament: are they more lenient in the "showcase" Champions League compared to the lower-tier Conference League?

The motivation for this project stems from the difficulty in validating these perceptions. While raw disciplinary statistics exist, they are rarely presented in a way that allows for a fair comparison across the three distinct tiers of UEFA competition. A simple count of yellow cards is insufficient to judge a referee's performance without context; one must account for the number of appearances and the specific tournament level to understand the referee's true "personality." Furthermore, varying nationalities of referees add another layer of complexity, do officials from certain regions enforce the rules more strictly when performing on the European stage?

To address this, our project develops an interactive visualization system that explores refereeing behaviors across the three major UEFA competitions spanning the 2021-2025 seasons. By synthesizing raw data (cards, penalties, appearances) into a derived "Strictness Score," we aim to quantify officiating patterns that are usually left to anecdote.

The goal of this visualization is to allow users to investigate the consistency of referees across the UEFA hierarchy. It enables the exploration of key questions: Do specific referees become "stricter" as they move down the tiers from the Champions League to the Conference League? Are there visible correlations between a referee's age or nationality and their likelihood to issue cards? By visualizing these metrics, we provide an objective, analytical lens on the men in the middle of Europe's biggest matches.

% ---------------------------------
\section{The Visualization Task}
% (Target Length: 1 page)
% ---------------------------------
%Goal: Define the data and the tasks formally (likely using Munzner's What-Why-How framework if it was covered in your lectures).

To design an effective visualization, we utilized the nested model for visualization design \cite{nested-model}. First, we analyzed the problem domain by abstracting the data into types and defining the abstract tasks the user needs to perform.

\subsection{Data Abstraction}
The underlying dataset is a tabular collection of disciplinary statistics for football referees officiating in UEFA competitions (Champions League, Europa League, and Conference League) across four seasons (2021-2025). The data consists of Items (individual referee records per season/league) and Attributes (characteristics of those records).

\subsubsection*{Categorical (Nominal)}
	 \begin{itemize}
		\item Name (Identifier).
		\item Nationality (e.g., "English", "German").
		\item League (The context of the Performance: UCL, UEL, UECL).
	\end{itemize}

\subsubsection*{Quantitative (Ratio)}
	\begin{itemize}
		\item Age (Sequential data allowing for correlation analysis).
		\item Appearances, Yellow Cards, Double Yellow Cards, Red Cards, Penalties (Counts start from zero).
	\end{itemize}

\subsubsection*{Derived Attribute: The Strictness Score}
Raw counts of cards are misleading without context (e.g., 5 red cards in 20 games is different from 5 red cards in 5 games). To solve this, we derived a quantitative attribute called Strictness Score. This provides a normalized single metric to rank officials.

The formula is defined as a weighted sum of disciplinary actions divided by the number of appearances:

\[\text{Strictness} = \frac{(W_y \times \text{Yellows}) + (W_{dy} \times \text{DoubleYellow}) + (W_r \times \text{Reds}) + (W_p \times \text{Penalties})}{\text{Appearances}}\]

(Note: In our implementation, we assigned default weights based on the severity of the punishment, e.g., Yellow=1, DoubleYellow=3, Red=5, Penalty=3. However they are user adjustable.)

\subsection{Task Abstraction}
The visualization is designed to support three primary high-level goals: Discover (finding unknown patterns), Derive (generating the strictness metric), and Compare (evaluating differences).

We broke these down into specific domain tasks:
\begin{enumerate}
	\item \textbf{Summarize \& Overview (Global Analysis):}
	\begin{itemize}
		\item Abstract Task: Summarize the distribution of strictness across the entire dataset.
		\item User Goal: The user needs to see the "All 3 Leagues" view to understand the general baseline of officiating in Europe before drilling down. This answers the question: "What is the average strictness of a European referee regardless of the tournament?"
	\end{itemize}
	\item \textbf{Compare Distributions:}
	\begin{itemize}
		\item Abstract Task: Compare attributes between derived clusters.
		\item User Goal: Compare the strictness levels between the Champions League and the Conference League. Are referees significantly harsher in lower-tier competitions?
	\end{itemize}
	\item \textbf{Identify Extremes (Outliers):}
		\begin{itemize}
			\item Abstract Task: Identify items with extreme values.
			\item User Goal: Spot the single "strictest" referee in the dataset or find a referee who gave an unusually high number of penalties in a single season.
		\end{itemize}
	\item \textbf{Correlate Attributes:}
		\begin{itemize}
			\item Abstract Task: Lookup and Correlate quantitative values.
			\item User Goal: Determine if Age correlates with Strictness. (e.g., "Do referees mellow out as they get older?").
		\end{itemize}
\end{enumerate}

By explicitly supporting the transition from a Summarized View (all leagues) to a Filtered View (specific league), the tool allows the user to verify if global trends hold true in local contexts

% ---------------------------------
\section{Related Work}
% (Target Length: 0.5 page)
% ---------------------------------
The analysis of officiating behavior has historically focused on statistical regression models to detect bias rather than interactive exploration. Academic studies have extensively documented "home advantage" and "social pressure" on referees using static datasets \cite{Boyko01092007,DAWSON2010181}. However, in the public domain, stakeholders typically rely on databases like Transfermarkt \footnote{https://www.transfermarkt.com/} or FBref \footnote{https://fbref.com/en/}. While comprehensive, these platforms present data in dense, siloed tables that obscure trends and make cross-league comparison difficult.

Our project bridges this gap by applying Information Visualization principles to this domain. We drew inspiration from the "Overview first, zoom and filter" paradigm \cite{shneiderman} to structure our dashboard. For specific visual encodings, we adapted the "player radar" concept often used in industry analytics (e.g., StatsBomb) into a "Referee Passport". Notably, we utilized Waffle Charts instead of traditional Pie Charts for our "Card DNA" view. This decision is grounded in graphical perception research \cite{cleveland-McGill}, which demonstrates that human observers estimate proportions more accurately in grid-based layouts than via angular slices, particularly when comparing small values like red cards.

% ---------------------------------
\section{The Visualization Solution}
% (Target Length: 1.5 pages)
% ---------------------------------
Our solution is implemented as a single-page React application using D3.js for rendering complex vector graphics and Material UI for the control interface. The design follows Shneiderman's Information Seeking Mantra: "Overview first, zoom and filter, then details-on-demand \cite{shneiderman}". All of these components are linked together such that when the user chooses a subset of the data, then that same subset is displayed on the rest of the views.

\subsection{Overview}
 The dashboard is divided into three logical zones:
 \begin{enumerate}
	 \item \textbf{Global Controls (Top Bar):} A persistent control panel allows users to filter the dataset by \textbf{Season} (2021-2025), \textbf{Nationality}, \textbf{Referee Name}, \textbf{Age Range}, and \textbf{Experience (Appearances)}. A global settings dialog allows users to adjust the weights of the "Strictness Formula" dynamically, empowering them to define what "strict" means to them (e.g., weighting red cards higher than penalties).
	 \item \textbf{Macroscopic Views (The Overview):} For the general overview of how the data distributes between the different leagues, we have chosen to place an upset plot at the top. This gives the user direct access to which subsets it is possible to look into, when comparing the different leagues to eachother.
	 \item \textbf{Comparative View} The next section features two coordinated views:
		 \begin{itemize}
			 \item \textbf{Geographic Strictness Map:} A choropleth map showing average strictness per country.

			 \item \textbf{Population Scatterplot:} A distribution plot placing every referee on an Age/Experience vs. Strictness plane.
		 \end{itemize}
	 \item \textbf{Microscopic (Details-on-Demand):} The lower section adapts based on the user's selection:
		 \begin{itemize}
			 \item No Selection: Shows general trends.
			 \item Multi-Selection: Activates the \textbf{League Comparison} Scatter (League X vs. League Y).
			 \item Single Selection: Activates the \textbf{Referee Passport} (Heatmap + Waffle Chart) for deep profiling.
		 \end{itemize}
 \end{enumerate}

\subsection{Design Decisions \& Justification}
We grounded our design choices in visualization theory, specifically focusing on effective mark and channel usage.

\begin{enumerate}[label=\Alph*.]
    \item \textbf{Strictness Encoding (Geographic \& Correlation Views)} 
    For the quantitative "Strictness" attribute in our main overview displays, we utilized a \textbf{Sequential Single-Hue Color Scale} (Light Aqua \texttt{\#8de4d3} $\rightarrow$ Medium Green \texttt{\#a0d66f} $\rightarrow$ Dark Green \texttt{\#1c5e39}).
        \begin{itemize}
            \item \textbf{Justification:} We transitioned to a colorblind-safe sequential scale to improve accessibility. Since strictness is a magnitude, we utilize \textbf{luminance} to encode value: lighter shades represent leniency, while darker shades represent high strictness. This ensures the pattern is visible to all users, avoiding common red-green deficiencies.
        \end{itemize}

    \item \textbf{The Geographic View}
        \begin{itemize}
            \item \textbf{Encoding:} We used a choropleth map where countries are colored by the average strictness of their referees (using the sequential green scale).

            \item \textbf{Interaction:} We implemented Linked Filtering. Clicking a country (e.g., Spain) acts as a global filter, instantly updating the scatterplots to show only Spanish referees.

            \item \textbf{Handling Sparsity:} To avoid misleading averages from countries with only 1 referee, we added a "Minimum Referees" slider and a "Region Mode" toggle (aggregating countries into regions like "Nordic" or "Eastern Europe"). 
        \end{itemize}

    \item \textbf{The Correlation View}
        \begin{itemize}
            \item Marks \& Channels: Each referee is a point.
                \begin{itemize}
                    \item \textbf{X-Position:} Mapped to Experience (Appearances) or Age (user-toggled). We chose position because it is the strongest channel for quantitative comparison.
                    \item \textbf{Y-Position:} Mapped to Strictness Index.
                    \item \textbf{Color:} Mapped to Strictness (redundant encoding to reinforce the pattern).   
                \end{itemize}
            \item \textbf{Occlusion Handling:} Non-selected referees are rendered with low opacity (0.3), while selected referees use high opacity (1.0) and a stroke border. This "Focus+Context" technique ensures the user can see their selection within the global distribution.
        \end{itemize}

    \item \textbf{The Cross-League Comparison}
        \begin{itemize}
            \item \textbf{Problem:} Users want to know if a referee changes their behavior between leagues (e.g., "Are they stricter in the Champions League than the Europa League?").
            \item \textbf{Solution:} A scatterplot where X = League A Strictness and Y = League B Strictness.
            \item \textbf{Reference Line:} We added a $y=x$ diagonal line. Points above the line indicate referees who are stricter in League B; points below are stricter in League A. This geometric aid allows for instant assessment of bias.
        \end{itemize}

    \item \textbf{Single Referee Profiling} When a single referee is selected, we provide a "Visual Identity Card":
        \begin{enumerate}
            \item \textbf{The "Passport" (Heatmap):} A matrix view (Rows: Competitions, Columns: Seasons) colored by strictness. This reveals temporal trends (e.g., "They were lenient in 2021 but strict in 2023").

            \item \textbf{The "Card DNA" (Waffle Chart):} A 10 x 10 grid representing the percentage split of disciplinary actions.
                \begin{itemize}
                    \item \textbf{Justification:} Unlike the strictness views, we retained the \textbf{semantic categorical colors} (Yellow for cautions, Red for dismissals) here. We chose a Waffle Chart over a Pie Chart because square grids allow for more accurate area comparison, while the semantic colors ensure immediate recognition of specific card types without needing to reference the abstract strictness scale.
                \end{itemize}
        \end{enumerate}
\end{enumerate}

\section{Use Case}
% (Target Length: 1 page)
% ---------------------------------
The exploration begins at the upset plot, where the user identifies a core group of 60 referees who officiate across all three UEFA leagues. Intrigued by this intersection, the user selects this subset, effectively filtering the data across all linked views. 

Turning to the choropleth map, the user notices a conspicuous absence of referees from major nations, such as Russia, within this subset. To investigate this anomaly, they select Russia to isolate its officials. The updated upset plot reveals that Russian referees in this dataset were primarily restricted to the Champions League. 

Observing that Russia's average strictness is comparable to other nations, the user hypothesizes a broader regional trend and switches the map to "Region Mode" to compare Eastern and Western Europe. Initially, Western Europe appears significantly more lenient. However, cross-referencing with the scatterplot reveals that this average is skewed by strict referees with very few appearances. 

By increasing the "Minimum Appearances" threshold, the user corrects for this sample size bias, revealing that strictness levels between the two regions are in fact statistically comparable. Further increasing the appearance threshold highlights a different disparity: Western referees tend to accumulate significantly higher match counts than their Eastern counterparts. The user continues this drill-down analysis by dynamically adjusting the strictness weights to verify if these regional tendencies hold true under different definitions of severity.

\begin{figure}[ht]
    \centering
    \includegraphics[width=0.8\textwidth]{eastern-vs-western.png}
    \caption{Visualization showing the comparison of Eastern vs. Western European referees with a minimum appearance of 4.}
    \label{fig:usecase}
\end{figure}

% ---------------------------------
\section{Limitations}
% (Target Length: 0.5 page)
% ---------------------------------
While our visualization successfully enables the comparative analysis of referee strictness, it is subject to specific limitations regarding the underlying data and visual scalability.

\subsection*{Data \& Metric Limitations} 
First, our "Strictness Score" algorithm is a linear weighted sum that does not capture the qualitative context of a foul. The data treats a "tactical" yellow card for time-wasting identically to a yellow card for a reckless tackle, meaning we cannot distinguish between strict rule enforcement and a loss of match control. Second, the model does not account for confounding external variables, such as the playing style of the teams involved; a referee may appear stricter simply because they officiated more aggressive teams. Finally, the geographic view suffers from sample size bias. Smaller nations often have only one international referee, meaning a single card-heavy performance can skew an entire country's color coding.

\subsection*{Visual \& Technical Limitations} Visually, the scatterplot suffers from occlusion when all seasons are active, as hundreds of data points cluster in the center, potentially hiding individual records. Additionally, while the user-configurable weights allow for flexibility, the default setting imposes an initial analytical bias that may not reflect every user's perception of severity. Lastly, our temporal heatmaps show strictness per season but lack granular match sequencing, preventing users from seeing if a referee's behavior changes immediately following a controversial decision.

% ---------------------------------
\section{Division of Labor}
% ---------------------------------
\begin{itemize}
	\item \textbf{Fannar} took part in the visualisation design, and designed and implemented the scatterplot and the grouped bar chart and their interactions.
	\item \textbf{Leonard} took part in visualisation design and implemented/designed the choropleth map and upset plot together with their interactions.
	\item \textbf{Petros} took part in the data collection, data preprocessing, exploratory data analysis, and worked on general issues that popped up in the integration of different visualisation components. 
	\item \textbf{Szymon} created the initial project structure including layout, took part in visualization designed and implemented referee specific charts (Referee Passport and Card DNA). Also was involved in additional improvements and fixes that were needed during the project work and after feedback.
\end{itemize}


% ---------------------------------
\bibliographystyle{plain} % Use the required bibliography style (e.g., IEEEtran, acm)
\section{Bibliography}
% (Target Length: 0.5 page)
% ---------------------------------

\bibliography{references} % Assumes your BibTeX file is named 'references.bib'

% List of required citation categories:
% 1. Data set source.
% 2. Principles/Frameworks (Mackinlay, Shneiderman, Gestalt).
% 3. Gotz and Zhou (2008) Task Taxonomy reference.
% 4. Article on Boeing's engineering department.
% 5. Color picker source.
% 6. Design/Benchmarking references.

\end{document}
